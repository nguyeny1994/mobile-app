default_platform(:android)

platform :android do

  lane :firebase_dev do
    gradle(
        task: "clean",
        project_dir: "android"
    )

    gradle(
        task: "assemble",
        flavor: "dev",
        flags: '-Ptarget=lib/main_dev.dart',
        build_type: "Release",
        project_dir: "android"
    )

    firebase_app_distribution(
      app: "{app_id}",
      firebase_cli_token: "1//0eZlv-NR3lm9fCgYIARAAGA4SNwF-L9IrqeWT7uAYlqWcEvOEcHGodDTUlMJj2nzcF0emCZ4YTz_xHBxbDynzRog3wPSVpgfCB10",
      apk_path: "../build/app/outputs/flutter-apk/app-dev-release.apk",
      groups: "group_nexle",
      debug: true
    )
  end

  lane :firebase_uat do
      gradle(
          task: "clean",
          project_dir: "android"
      )

      gradle(
          task: "assemble",
          flavor: "uat",
          flags: '-Ptarget=lib/main_uat.dart',
          build_type: "Release",
          project_dir: "android"
      )

    firebase_app_distribution(
      app: "{app_id}",
      firebase_cli_token: "1//0eZlv-NR3lm9fCgYIARAAGA4SNwF-L9IrqeWT7uAYlqWcEvOEcHGodDTUlMJj2nzcF0emCZ4YTz_xHBxbDynzRog3wPSVpgfCB10",
      apk_path: "../build/app/outputs/flutter-apk/app-uat-release.apk",
      groups: "group_nexle"
    )
    end
end
